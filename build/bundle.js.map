{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://server/./src/application/common/utils/access.js","webpack://server/./src/application/common/utils/secret.js","webpack://server/./src/application/config/sockets.js","webpack://server/./src/application/config/swagger.js","webpack://server/./src/application/database/index.js","webpack://server/./src/application/documentation/index.js","webpack://server/./src/application/middlewares/error-handler.js","webpack://server/./src/application/middlewares/index.js","webpack://server/./src/application/middlewares/restricted-access.js","webpack://server/./src/application/middlewares/with-sockets.js","webpack://server/./src/application/repository/generic-model.js","webpack://server/./src/entities/auth/adapters/http/index.js","webpack://server/./src/entities/auth/auth0/api.js","webpack://server/./src/entities/auth/auth0/index.js","webpack://server/./src/entities/auth/auth0/secret.js","webpack://server/./src/entities/auth/controller/index.js","webpack://server/./src/entities/auth/service/index.js","webpack://server/./src/entities/index.js","webpack://server/./src/entities/user/adapters/http/index.js","webpack://server/./src/entities/user/adapters/socket/index.js","webpack://server/./src/entities/user/controller/index.js","webpack://server/./src/entities/user/model/index.js","webpack://server/./src/entities/user/model/schema.js","webpack://server/external commonjs \"@babel/runtime/helpers/asyncToGenerator\"","webpack://server/external commonjs \"@babel/runtime/helpers/defineProperty\"","webpack://server/external commonjs \"@babel/runtime/helpers/slicedToArray\"","webpack://server/external commonjs \"@babel/runtime/regenerator\"","webpack://server/external commonjs \"auth0\"","webpack://server/external commonjs \"cors\"","webpack://server/external commonjs \"express\"","webpack://server/external commonjs \"jsonwebtoken\"","webpack://server/external commonjs \"jwks-rsa\"","webpack://server/external commonjs \"sequelize\"","webpack://server/external commonjs \"socket.io\"","webpack://server/external commonjs \"swagger-jsdoc\"","webpack://server/external commonjs \"swagger-ui-express\"","webpack://server/external node-commonjs \"http\"","webpack://server/webpack/bootstrap","webpack://server/webpack/runtime/compat get default export","webpack://server/webpack/runtime/define property getters","webpack://server/webpack/runtime/hasOwnProperty shorthand","webpack://server/webpack/runtime/make namespace object","webpack://server/./src/index.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\nimport { getKey } from './secret';\n\nexport const verifyToken = token => new Promise(((resolve, reject) => {\n    jwt.verify(token, getKey, (err, decoded) => err || !decoded\n        ? reject(err)\n        : resolve({ ...decoded, id: decoded.sub || decoded.id }));\n}));","import jwksClient from 'jwks-rsa';\r\n\r\nconst { JWKS_URI } = process.env;\r\n\r\nconst client = jwksClient({ jwksUri: String(JWKS_URI) });\r\n\r\nexport const getKey = (header, callback) => {\r\n    client.getSigningKey(header.kid, (err, key) => {\r\n        if (err) return callback(err);\r\n        const signingKey = key.getPublicKey();\r\n        callback(err, signingKey);\r\n    });\r\n};\r\n","\r\nexport const config = {\r\n    cors: {\r\n        origin: \"*\",\r\n        methods: [\"GET\", \"POST\"],\r\n        credentials: true\r\n    },\r\n    allowEIO3: true\r\n};","export const swaggerConfig = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Test API',\n      version: '1.0.0',\n    },\n    components: {\n      securitySchemes: {\n        ApiKeyAuth: {\n          type: 'apiKey',\n          name: 'x-access-token',\n          in: 'header',\n        },\n      },\n    },\n    security: [\n      { ApiKeyAuth: [] },\n    ],\n    securityDefinitions: {\n      basicAuth: {\n        type: 'basic'\n      },\n    },\n  },\n  // Path to the API docs\n  apis: ['./src/entities/**/*.js', './src/entities/**/*.yml'],\n};\n\n","import { Sequelize, DataTypes } from 'sequelize';\r\n\r\nconst database = process.env.DB_NAME;\r\nconst user = process.env.DB_USER;\r\nconst password = process.env.DB_PASSWORD;\r\nconst host = process.env.DB_HOST;\r\nconst forceCleanDatabase = process.env.DB_FORCE_CLEAN === 'true';\r\n\r\nexport const db = new Sequelize(database, user, password, {\r\n    host,\r\n    dialect: 'mysql',\r\n    logging: false,\r\n});\r\n\r\nexport { DataTypes };\r\n\r\nexport const setAssociations = (db) => {\r\n    Object.keys(db.models).forEach((modelName) => {\r\n        if ('associate' in db.models[modelName]) {\r\n            db.models[modelName].associate(db.models);\r\n        }\r\n    });\r\n};\r\n\r\nexport default async (onConnect) => {\r\n    try {\r\n        await setAssociations(db);\r\n        await db.authenticate();\r\n        await db.sync({ force: forceCleanDatabase });\r\n        onConnect();\r\n        console.log('Database connection OK!');\r\n    } catch (error) {\r\n        console.log('Unable to connect to the database:');\r\n    }\r\n}","import swaggerJSDoc from \"swagger-jsdoc\";\nimport swaggerUi from \"swagger-ui-express\";\nimport { swaggerConfig } from \"../config/swagger\";\n\nconst Documentation = (app) => {\n  // JSON of specs\n  const swaggerSpec = swaggerJSDoc(swaggerConfig);\n\n  // Api entrypoint\n  app.use(\"/docs\", swaggerUi.serve, swaggerUi.setup(swaggerSpec));\n};\n\nexport default Documentation;\n","/*Tenemos una función que recibe como parámetro la función de cada controlador,\nla ejecuta (resolve)\ny si  hay algún error, lo mostrará por consola y lanzará un 500\n*/\n\nexport const asyncHandler = controller => (req, res, next) => Promise\n  .resolve(controller(req, res, next))\n  .catch((err) => {\n    console.error('Request error:' + err.toString());\n    if (err) return res.sendStatus(500).send();\n});\n \nexport const socketHandler = controller => msg => Promise\n  .resolve(controller(msg))\n  .catch((err) => {\n    console.error('Socket error:' + err);\n});","import express from 'express';\nimport cors from 'cors';\nimport withSockets from './with-sockets';\n\nconst Middlewares = (app, io) => {\n    app.use(express.urlencoded({extended: true}));\n    app.use(express.json());\n    app.use(withSockets(io));\n    app.use(cors()) // Use this after the variable declaration\n};\n\nexport default Middlewares;","import { verifyToken } from '@Application/common/utils/access';\nexport const getHeader = (req, header) => req.headers[header];\n\nexport default (req, res, next) => {\n  const token = getHeader(req, 'authorization');\n\n  if (!token) {\n    return res.status(400).send('No token provided.');\n  }\n  return verifyToken(token, (err, { id } = {}) => {\n    if (err) {\n      return res.status(401).send('Failed to authenticate token.');\n    }\n\n    if (!id) {\n      return res.status(403).send('Wrong credentials');\n    }\n    req.userId = id;\n    return next();\n  });\n}","const withSockets = io => (req, res, next) => {\r\n    req.io = io;\r\n    return next();\r\n};\r\n\r\nexport default withSockets;\r\n","\r\nconst GenericModel = Model => ({\r\n    create(data) {\r\n        return Model.create(data);\r\n    },\r\n    get(conditions) {\r\n        return Model.findAll(conditions ? {where:conditions} : {});\r\n    },\r\n    getById(id) {\r\n        return Model.findOne({ where: { id } });\r\n    },\r\n    updateById(id, data) {\r\n        return Model.update(data, { where: { id } });\r\n    },\r\n    deleteById(id) {\r\n        return Model.destroy({ where: { id } });\r\n    },\r\n    findOrCreate(condition, newObj){\r\n        return Model.findOrCreate({where:condition, defaults: newObj});\r\n    }\r\n});\r\n\r\nexport default GenericModel;\r\n","import express from 'express';\r\nimport Controller from \"../../controller\";\r\nimport {asyncHandler} from \"@Middlwares/error-handler\";\r\n// Para operaciones con acceso restringido, introduciremos un segundo parámetro que será la variable restrictedAccess\r\nimport restrictedAccess from \"@Middlwares/restricted-access\";\r\n\r\nconst router = express.Router();\r\n\r\n// GET ALL\r\nrouter.post('/login', asyncHandler(async (req, res) => {\r\n\r\n    const data = await Controller.login(req.body.token);\r\n    console.log(data);\r\n    res.send(data);\r\n}));\r\n\r\n\r\nexport default app => app.use('/auth', router);","import auth0 from 'auth0';\r\n\r\nconst config = {\r\n    domain: process.env.AUTH0_DOMAIN,\r\n    clientId: process.env.AUTH0_CLIENT_ID,\r\n    clientSecret: process.env.AUTH0_SECRET,\r\n    audience: process.env.AUTH0_AUDIENCE,\r\n};\r\n\r\nexport const getManagementApi = () => new auth0.ManagementClient(config);\r\n\r\nexport const getAuthenticationApi = () => new auth0.AuthenticationClient(config);","import jwt from 'jsonwebtoken';\r\nimport { getKey } from './secret';\r\nimport { getManagementApi, getAuthenticationApi } from './api';\r\n\r\nexport const verifyAuthToken = token => new Promise(((resolve, reject) => {\r\n    jwt.verify(token, getKey, (err, decoded) => err || !decoded\r\n        ? reject(err)\r\n        : resolve({ ...decoded, id: decoded.sub || decoded.id }));\r\n}));\r\n\r\nexport const ManagementClient = getManagementApi();\r\nexport const AuthenticationClient = getAuthenticationApi();","import jwksClient from 'jwks-rsa';\r\n\r\nconst { JWKS_URI } = process.env;\r\n\r\nconst client = jwksClient({ jwksUri: String(JWKS_URI) });\r\n\r\nexport const getKey = (header, callback) => {\r\n    client.getSigningKey(header.kid, (err, key) => {\r\n        if (err) return callback(err);\r\n        const signingKey = key.getPublicKey();\r\n        callback(err, signingKey);\r\n    });\r\n};\r\n","import Service from '../service';\n\nconst Controller = {\n    login(token) {\n        return Service().signIn(token);\n    }\n}\n\nexport default Controller;\n","import { ManagementClient, verifyAuthToken } from '../auth0';\r\nimport UserModel from '../../user/model';\r\n\r\n\r\nconst AuthService = () => ({\r\n    async signIn(providerToken) {\r\n        const { id, email_verified } = await verifyAuthToken(providerToken);\r\n\r\n        const [user] = await UserModel.findOrCreate({ auth0Id: id });\r\n\r\n        return { user, verified: email_verified };\r\n    },\r\n    deleteUser(userProviderId) {\r\n        return ManagementClient.deleteUser({ id: userProviderId });\r\n    },\r\n});\r\n\r\nexport default AuthService;","import userRoutes from './user/adapters/http';\nimport userSockets from './user/adapters/socket';\nimport authRoutes from './auth/adapters/http';\n\nexport const Routes = (app) => {\n  userRoutes(app);\n  authRoutes(app);\n}\n\nexport const Sockets = (io, socket) => {\n  userSockets(io, socket);\n}","import express from 'express';\r\nimport Controller from '../../controller';\r\nimport { asyncHandler } from \"@Middlwares/error-handler\";\r\n// Para operaciones con acceso restringido, introduciremos un segundo parámetro que será la variable restrictedAccess\r\nimport restrictedAccess from \"@Middlwares/restricted-access\";\r\n\r\nconst router = express.Router();\r\n\r\n\r\n\r\nexport default app => app.use('/user', router);\r\n","import { socketHandler } from '@Middlwares/error-handler';\r\nimport Controller from '../../controller';\r\n\r\nconst StartSocketServer = (io, socket) => {\r\n    console.log('StartSocketServer');\r\n    socket.on('alguienTermino', socketHandler(async (msg) => {\r\n        io.emit('alguienTermino', msg);\r\n    }));\r\n\r\n    socket.on('addAlumnos', socketHandler(async (msg) => {\r\n        const data = await Controller.getAll();\r\n        console.log('aaaaaaaaaaaaaaaa', data);\r\n    }));\r\n};\r\n\r\nexport default StartSocketServer;\r\n","import Model from \"../../user/model\";\n\nconst Controller = {\n  get(conditions) {\n    return Model.get(conditions);\n  },\n  getById(id) {\n    return Model.getById(id);\n  },\n  create(data) {\n    return Model.create(data);\n  },\n  updateById(id, data) {\n    return Model.updateById(id, data);\n  },\n  deleteById(id) {\n    return Model.deleteById(id);\n  }\n}\n\nexport default Controller;","import GenericModel from '@Application/repository/generic-model';\nimport Schema from './schema';\n\nconst Model = {\n    ...GenericModel(Schema),\n    getByEmail: email => Schema.findOne({ where: { email } })\n};\n\nexport default Model;\n\n","import { db, DataTypes } from '@Application/database';\r\n\r\nexport default db.define('user', {\r\n\temail: DataTypes.STRING,\r\n\tauth0Id: DataTypes.STRING,\r\n});\r\n\r\n","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"auth0\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"jwks-rsa\");","module.exports = require(\"sequelize\");","module.exports = require(\"socket.io\");","module.exports = require(\"swagger-jsdoc\");","module.exports = require(\"swagger-ui-express\");","module.exports = require(\"http\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import express from 'express';\nimport http from 'http';\nimport { Server } from 'socket.io';\nimport { config } from '@Application/config/sockets';\nimport Middlewares from './application/middlewares';\nimport { Routes, Sockets } from './entities';\nimport Documentation from './application/documentation';\nimport ConnectDatabase from './application/database';\n\nconst app = express();\n/*\nHeroku utiliza la variable de entorno process.env.port para asignar el puerto donde se va ejecutar el servidor,\npor eso la hemos definido en esta plantilla\n*/\nconst port = process.env.PORT;\nconst server = http.createServer(app);\nconst io = new Server(server, config);\n\nDocumentation(app);\nMiddlewares(app, io);\nRoutes(app);\n\n\nConnectDatabase(() => {\n    console.log(77)\n    io.on('connection', (socket) => {\n        console.log(88)\n        Sockets(io, socket);\n    });\n    server.listen(port, () => console.log(`Server listening to http://localhost:${port}`));\n});\n"],"names":["jwt","getKey","verifyToken","token","Promise","resolve","reject","verify","err","decoded","id","sub","jwksClient","JWKS_URI","process","env","client","jwksUri","String","header","callback","getSigningKey","kid","key","signingKey","getPublicKey","config","cors","origin","methods","credentials","allowEIO3","swaggerConfig","definition","openapi","info","title","version","components","securitySchemes","ApiKeyAuth","type","name","security","securityDefinitions","basicAuth","apis","Sequelize","DataTypes","database","DB_NAME","user","DB_USER","password","DB_PASSWORD","host","DB_HOST","forceCleanDatabase","DB_FORCE_CLEAN","db","dialect","logging","setAssociations","Object","keys","models","forEach","modelName","associate","onConnect","authenticate","sync","force","console","log","swaggerJSDoc","swaggerUi","Documentation","app","swaggerSpec","use","serve","setup","asyncHandler","controller","req","res","next","error","toString","sendStatus","send","socketHandler","msg","express","withSockets","Middlewares","io","urlencoded","extended","json","getHeader","headers","status","userId","GenericModel","Model","create","data","get","conditions","findAll","where","getById","findOne","updateById","update","deleteById","destroy","findOrCreate","condition","newObj","defaults","Controller","restrictedAccess","router","Router","post","login","body","auth0","domain","AUTH0_DOMAIN","clientId","AUTH0_CLIENT_ID","clientSecret","AUTH0_SECRET","audience","AUTH0_AUDIENCE","getManagementApi","ManagementClient","getAuthenticationApi","AuthenticationClient","verifyAuthToken","Service","signIn","UserModel","AuthService","providerToken","email_verified","auth0Id","verified","deleteUser","userProviderId","userRoutes","userSockets","authRoutes","Routes","Sockets","socket","StartSocketServer","on","emit","getAll","Schema","getByEmail","email","define","STRING","http","Server","ConnectDatabase","port","PORT","server","createServer","listen"],"sourceRoot":""}