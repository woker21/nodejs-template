{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config/database.js","webpack:///./src/config/swagger.js","webpack:///./src/controllers/api/index.js","webpack:///./src/controllers/index.js","webpack:///./src/documentation/index.js","webpack:///./src/index.js","webpack:///./src/middlewares/error-handler.js","webpack:///./src/middlewares/index.js","webpack:///./src/middlewares/restricted-access.js","webpack:///./src/models/connection.js","webpack:///./src/models/index.js","webpack:///./src/utils/access.js","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"sequelize\"","webpack:///external \"swagger-jsdoc\"","webpack:///external \"swagger-ui-express\""],"names":["host","user","password","database","connectionLimit","swaggerConfig","definition","openapi","info","title","version","components","securitySchemes","ApiKeyAuth","type","name","security","securityDefinitions","basicAuth","apis","StartApiServer","app","get","req","res","send","post","asyncHandler","mail","body","pass","id","token","createToken","restrictedAccess","userId","Controllers","Api","Documentation","swaggerSpec","swaggerJSDoc","use","swaggerUi","serve","setup","express","port","process","env","PORT","Middlewares","server","http","createServer","listen","console","log","controller","next","Promise","resolve","err","error","toString","sendStatus","socketHandler","msg","bodyParser","urlencoded","json","cors","header","method","end","getHeader","headers","status","verifyToken","dbName","dbConfig","Sequelize","dialect","require","QueryTypes","login","cod","db","query","replacements","SELECT","secret","decodeToken","jwt","decode","data","sign","callback","verify"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","export default {\r\n    host: 'server.com',\r\n    user: 'user',\r\n    password: 'pass',\r\n    database: 'database_name',\r\n    connectionLimit : 10,\r\n};","export const swaggerConfig = {\r\n  definition: {\r\n    openapi: '3.0.0',\r\n    info: {\r\n      title: 'Test API',\r\n      version: '1.0.0',\r\n    },\r\n    components: {\r\n      securitySchemes: {\r\n        ApiKeyAuth: {\r\n          type: 'apiKey',\r\n          name: 'x-access-token',\r\n          in: 'header',\r\n        },\r\n      },\r\n    },\r\n    security: [\r\n      { ApiKeyAuth: [] },\r\n    ],\r\n    securityDefinitions: {\r\n        basicAuth: {\r\n            type: 'basic'\r\n        },\r\n    },\r\n  },\r\n  // Path to the API docs\r\n  apis: ['./src/controllers/**/*.js', './src/controllers/**/*.yml'],\r\n};\r\n\r\n","import * as Model from \"../../models\";\r\nimport { createToken } from \"../../utils/access\";\r\nimport { asyncHandler } from \"../../middlewares/error-handler\";\r\nimport restrictedAccess from \"../../middlewares/restricted-access\";\r\n\r\nconst StartApiServer = (app) => {\r\n  /**\r\n   * @swagger\r\n   *\r\n   * /:\r\n   *   get:\r\n   *     description: Test request\r\n   *     tags:\r\n   *       - Public\r\n   *     responses:\r\n   *       200:\r\n   *         []\r\n   *     security:\r\n   *       - basicAuth\r\n   */\r\n  app.get(\"/\", function (req, res) {\r\n    res.send(\"va bien la cosa\");\r\n  });\r\n\r\n  /**\r\n   * @swagger\r\n   *\r\n   * /login:\r\n   *   post:\r\n   *     description: Login endpoint\r\n   *     requestBody:\r\n   *       description: User credentials (email, password)\r\n   *       content:\r\n   *         application/json:\r\n   *           examples:\r\n   *             Credentials exmaple:\r\n   *               value:\r\n   *                 mail: pp@pp.com\r\n   *                 pass: pp\r\n   *           schema:\r\n   *             type: object\r\n   *             properties:\r\n   *               mail:\r\n   *                 type: string\r\n   *               pass:\r\n   *                 type: string\r\n   *     tags:\r\n   *       - Public\r\n   *     responses:\r\n   *       200:\r\n   *         []\r\n   *     security:\r\n   *       - basicAuth\r\n   */\r\n  app.post(\"/login\", asyncHandler(async (req, res) => {\r\n      const mail = req.body.mail;\r\n      const pass = req.body.pass;\r\n\r\n      if(!mail || !pass) return res.send(400);\r\n      // const user = await Model.login(mail, pass);\r\n      const user = { id: 5, name: 'maria' };\r\n\r\n      const token = createToken({ id: user.id })\r\n\r\n      res.send(token);\r\n    })\r\n  );\r\n\r\n    /**\r\n   * @swagger\r\n   *\r\n   * /restricted-path:\r\n   *   get:\r\n   *     description: Restricted path\r\n   *     tags:\r\n   *       - Restricted\r\n   *     responses:\r\n   *       200:\r\n   *         []\r\n   */\r\n  app.get(\"/restricted-path\", restrictedAccess, (req, res) => {\r\n    res.send(`User id: ${req.userId}`);\r\n  });\r\n};\r\n\r\nexport default StartApiServer;\r\n","import Api from './api';\r\n\r\nconst Controllers = (app) => {\r\n    Api(app);\r\n};\r\n\r\nexport default Controllers;","import swaggerJSDoc from \"swagger-jsdoc\";\r\nimport swaggerUi from \"swagger-ui-express\";\r\nimport { swaggerConfig, options } from \"../config/swagger\";\r\n\r\nconst Documentation = (app) => {\r\n  // JSON of specs\r\n  const swaggerSpec = swaggerJSDoc(swaggerConfig);\r\n\r\n  // Api entrypoint\r\n  app.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(swaggerSpec));\r\n};\r\n\r\nexport default Documentation;\r\n","import express from 'express';\r\nimport http from 'http';\r\nimport Middlewares from './middlewares';\r\nimport Controllers from './controllers';\r\nimport Documentation from './documentation';\r\n\r\nconst app = express();\r\n/*\r\nHeroku utiliza la variable de entorno process.env.port para asignar el puerto donde se va ejecutar el servidor,\r\npor eso la hemos definido en esta plantilla\r\n*/\r\nconst port = process.env.PORT || 3005;\r\n\r\nDocumentation(app);\r\nMiddlewares(app);\r\nControllers(app);\r\n\r\nconst server = http.createServer(app);\r\n\r\nserver.listen(port, () => console.log(`Server listening to http://localhost:${port}`));","/*Tenemos una función que recibe como parámetro la función de cada controlador,\r\nla ejecuta (resolve)\r\ny si  hay algún error, lo mostrará por consola y lanzará un 500\r\n*/\r\nexport const asyncHandler = controller => (req, res, next) => Promise\r\n  .resolve(controller(req, res, next))\r\n  .catch((err) => {\r\n    console.error('Request error:' + err.toString());\r\n    if (err) return res.sendStatus(500).send();\r\n});\r\n \r\nexport const socketHandler = controller => msg => Promise\r\n  .resolve(controller(msg))\r\n  .catch((err) => {\r\n    console.error('Socket error:' + err);\r\n});","import cors from 'cors';\r\nimport bodyParser from 'body-parser';\r\n\r\nconst Middlewares = (app) => {\r\n    app.use(bodyParser.urlencoded());\r\n    app.use(bodyParser.json());\r\n    app.use(cors()) // Use this after the variable declaration\r\n    app.use(function (req, res, next) {\r\n        res.header('Access-Control-Allow-Origin', '*');\r\n        res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\r\n        res.header('Access-Control-Allow-Credentials', true);\r\n        res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');\r\n    \r\n        if (req.method === 'OPTIONS') {\r\n            res.end();\r\n        } else {\r\n            next();\r\n        }\r\n    });\r\n};\r\n\r\nexport default Middlewares;","import { verifyToken } from '../utils/access';\r\nexport const getHeader = (req, header) => req.headers[header];\r\n\r\nexport default (req, res, next) => {\r\n  const token = getHeader(req, 'x-access-token');\r\n  \r\n  if (!token) {\r\n    return res.status(400).send('No token provided.');\r\n  }\r\n  return verifyToken(token, (err, { id } = {}) => {\r\n    if (err) {\r\n      return res.status(401).send('Failed to authenticate token.');\r\n    }\r\n\r\n    if (!id) {\r\n      return res.status(403).send('Wrong credentials');\r\n    }\r\n    req.userId = id;\r\n    return next();\r\n  });\r\n}","import { Sequelize } from 'sequelize';\r\nimport dbConfig from '../config/database';\r\n\r\nconst { dbName, user, password, host } = dbConfig;\r\nexport default new Sequelize(dbName, user, password, {\r\n    host,\r\n    dialect: 'mysql',\r\n});","import db from './connection';\r\nconst { QueryTypes } = require('sequelize');\r\n\r\nexport const login = cod => db.query(\r\n    'SELECT * FROM pap_user WHERE mail = :msil AND password = :password',\r\n    { \r\n        replacements: { mail, password },\r\n        type: QueryTypes.SELECT\r\n    }\r\n)","import jwt from 'jsonwebtoken';\r\n\r\nconst secret = 'secret';\r\n\r\nexport const decodeToken = jwt.decode;\r\n\r\nexport const createToken = data => jwt.sign(data, secret);\r\n\r\nexport const verifyToken = (token, callback) => jwt.verify(token, secret, callback);","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"body-parser\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"http\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"sequelize\");","module.exports = require(\"swagger-jsdoc\");","module.exports = require(\"swagger-ui-express\");"],"sourceRoot":""}