{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://server/./src/application/common/utils/access.js","webpack://server/./src/application/config/swagger.js","webpack://server/./src/application/database/index.js","webpack://server/./src/application/documentation/index.js","webpack://server/./src/application/middlewares/error-handler.js","webpack://server/./src/application/middlewares/index.js","webpack://server/./src/application/middlewares/restricted-access.js","webpack://server/./src/entities/index.js","webpack://server/./src/entities/user/controller/index.js","webpack://server/./src/entities/user/model/index.js","webpack://server/./src/entities/user/model/schema.js","webpack://server/./src/sockets/index.js","webpack://server/./src/sockets/message/index.js","webpack://server/external commonjs \"@babel/runtime/helpers/asyncToGenerator\"","webpack://server/external commonjs \"@babel/runtime/regenerator\"","webpack://server/external commonjs \"cors\"","webpack://server/external commonjs \"express\"","webpack://server/external commonjs \"jsonwebtoken\"","webpack://server/external commonjs \"sequelize\"","webpack://server/external commonjs \"socket.io\"","webpack://server/external commonjs \"swagger-jsdoc\"","webpack://server/external commonjs \"swagger-ui-express\"","webpack://server/external node-commonjs \"http\"","webpack://server/webpack/bootstrap","webpack://server/webpack/runtime/compat get default export","webpack://server/webpack/runtime/define property getters","webpack://server/webpack/runtime/hasOwnProperty shorthand","webpack://server/webpack/runtime/make namespace object","webpack://server/./src/index.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\n\nconst secret = 'secret';\n\nexport const decodeToken = jwt.decode;\n\nexport const createToken = data => jwt.sign(data, secret);\n\nexport const verifyToken = (token, callback) => jwt.verify(token, secret, callback);","export const swaggerConfig = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Test API',\n      version: '1.0.0',\n    },\n    components: {\n      securitySchemes: {\n        ApiKeyAuth: {\n          type: 'apiKey',\n          name: 'x-access-token',\n          in: 'header',\n        },\n      },\n    },\n    security: [\n      { ApiKeyAuth: [] },\n    ],\n    securityDefinitions: {\n      basicAuth: {\n        type: 'basic'\n      },\n    },\n  },\n  // Path to the API docs\n  apis: ['./src/entities/**/*.js', './src/entities/**/*.yml'],\n};\n\n","import { Sequelize } from 'sequelize';\r\n\r\nconst database = process.env.DB_NAME;\r\nconst user = process.env.DB_USER;\r\nconst password = process.env.DB_PASSWORD;\r\nconst host = process.env.DB_HOST;\r\nconst forceCleanDatabase = process.env.DB_FORCE_CLEAN;\r\n\r\nexport const db = new Sequelize(database, user, password, {\r\n\thost,\r\n\tdialect: 'mysql',\r\n\tquery: { raw: true }\r\n});\r\n\r\nexport default async (onConnect) => {\r\n\ttry {\r\n\t\tawait db.authenticate();\r\n\t\tdb.sync({ force: forceCleanDatabase });\r\n\t\tonConnect();\r\n\t\tconsole.log('Database connection OK!');\r\n\t} catch (error) {\r\n\t\tconsole.log('Unable to connect to the database:');\r\n\t}\r\n}","import swaggerJSDoc from \"swagger-jsdoc\";\nimport swaggerUi from \"swagger-ui-express\";\nimport { swaggerConfig } from \"../config/swagger\";\n\nconst Documentation = (app) => {\n  // JSON of specs\n  const swaggerSpec = swaggerJSDoc(swaggerConfig);\n\n  // Api entrypoint\n  app.use(\"/docs\", swaggerUi.serve, swaggerUi.setup(swaggerSpec));\n};\n\nexport default Documentation;\n","/*Tenemos una función que recibe como parámetro la función de cada controlador,\nla ejecuta (resolve)\ny si  hay algún error, lo mostrará por consola y lanzará un 500\n*/\n\nexport const asyncHandler = controller => (req, res, next) => Promise\n  .resolve(controller(req, res, next))\n  .catch((err) => {\n    console.error('Request error:' + err.toString());\n    if (err) return res.sendStatus(500).send();\n});\n \nexport const socketHandler = controller => msg => Promise\n  .resolve(controller(msg))\n  .catch((err) => {\n    console.error('Socket error:' + err);\n});","import express from 'express';\nimport cors from 'cors';\n\nconst Middlewares = (app) => {\n    app.use(express.urlencoded({ extended: true }));\n    app.use(express.json());\n    app.use(cors()) // Use this after the variable declaration\n    app.use(function (req, res, next) {\n        res.header('Access-Control-Allow-Origin', '*');\n        res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n        res.header('Access-Control-Allow-Credentials', true);\n        res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');\n\n        if (req.method === 'OPTIONS') {\n            res.end();\n        } else {\n            next();\n        }\n    });\n};\n\nexport default Middlewares;","import { verifyToken } from '@Application/common/utils/access';\nexport const getHeader = (req, header) => req.headers[header];\n\nexport default (req, res, next) => {\n  const token = getHeader(req, 'x-access-token');\n\n  if (!token) {\n    return res.status(400).send('No token provided.');\n  }\n  return verifyToken(token, (err, { id } = {}) => {\n    if (err) {\n      return res.status(401).send('Failed to authenticate token.');\n    }\n\n    if (!id) {\n      return res.status(403).send('Wrong credentials');\n    }\n    req.userId = id;\n    return next();\n  });\n}","import UsersController from './user/controller';\n\nexport default function (app) {\n  // Private\n  app.use('/users', UsersController);\n\n  app.use('/', (req, res) => res.send('Working like a charm'));\n\n}\n","import express from 'express';\nimport { asyncHandler } from \"@Middlwares/error-handler\";\nimport * as Model from \"../model\";\n// Para operaciones con acceso restringido, introduciremos un segundo parámetro que será la variable restrictedAccess\nimport restrictedAccess from \"@Middlwares/restricted-access\";\n\nconst router = express.Router();\n\n// GET ALL\nrouter.get('/', asyncHandler(async (req, res) => {\n  const data = await Model.get();\n  res.send(data);\n}));\n\n// GET BY ID\nrouter.get('/:userId', asyncHandler(async (req, res) => {\n  const { query: { userId } } = req;\n  const data = await Model.getById(userId);\n  res.send(data);\n}));\n\n// CREATE\nrouter.post(\"/\", asyncHandler(async (req, res) => {\n  const { body: { mail, username, password } } = req;\n  await Model.create(mail, username, password)\n  res.send('Usuario creado con éxito');\n}));\n\n// DELETE\nrouter.delete(\"/:id\", asyncHandler(async (req, res) => {\n  const { params: { id } } = req;\n  await Model.remove(id);\n  res.send(`User id: ${id} deleted`);\n}));\n\n// TOTAL UPDATE\nrouter.put(\"/:id\", async (req, res) => {\n  const { params: { id }, body } = req;\n  await Model.update(id, body);\n  res.send(`User id: ${id} updated`);\n});\n\n\nexport default router;","import Schema from './schema';\n\nexport const create = (mail, username, password) => Schema.create({\n    mail,\n    username,\n    password,\n});\n\nexport const update = (id, data) => Schema.update(data, { where: { id } });\n\nexport const remove = id => Schema.destroy({ where: { id } });\n\nexport const getByEmailAndPassword = (mail, password) => Schema.findOne({\n    where: {\n        mail,\n        password\n    }\n});\n\nexport const getById = (id) => Schema.findOne({\n    where: {\n        id\n    }\n});\n\nexport const get = () => Schema.findAll();\n","import { db } from '@Application/database';\r\nconst { DataTypes } = require('sequelize');\r\n\r\nexport default db.define('user', {\r\n\tusername: DataTypes.STRING,\r\n\tpassword: DataTypes.STRING,\r\n\tmail: DataTypes.STRING,\r\n});\r\n\r\n","import socketIO from 'socket.io';\nimport MessagesController from './message';\n\nconst config = {\n  cors: {\n    origin: \"*\",\n  }\n};\n\nexport default (server) => {\n  const io = socketIO(server, config);\n  io.on('connection', (socket) => {\n    MessagesController(io, socket);\n  });\n}\n","import { socketHandler } from '../../application/middlewares/error-handler';\n\nexport default (io, socket) => {\n  socket.on('message', socketHandler(async (msg) => {\n    console.log(msg);\n  }));\n};","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"sequelize\");","module.exports = require(\"socket.io\");","module.exports = require(\"swagger-jsdoc\");","module.exports = require(\"swagger-ui-express\");","module.exports = require(\"http\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import express from 'express';\nimport http from 'http';\nimport Middlewares from './application/middlewares';\nimport Controllers from './entities';\nimport Documentation from './application/documentation';\nimport ConnectDatabase from './application/database';\nimport SocketsControllers from './sockets';\n\nconst app = express();\n/*\nHeroku utiliza la variable de entorno process.env.port para asignar el puerto donde se va ejecutar el servidor,\npor eso la hemos definido en esta plantilla\n*/\nconst port = process.env.PORT;\nconst server = http.createServer(app);\n\nDocumentation(app);\nMiddlewares(app);\nControllers(app);\nSocketsControllers(server);\n\nConnectDatabase(() => {\n    server.listen(port, () => console.log(`Server listening to http://localhost:${port}`));\n});"],"names":["jwt","secret","decodeToken","decode","createToken","data","sign","verifyToken","token","callback","verify","swaggerConfig","definition","openapi","info","title","version","components","securitySchemes","ApiKeyAuth","type","name","security","securityDefinitions","basicAuth","apis","Sequelize","database","process","env","DB_NAME","user","DB_USER","password","DB_PASSWORD","host","DB_HOST","forceCleanDatabase","DB_FORCE_CLEAN","db","dialect","query","raw","onConnect","authenticate","sync","force","console","log","swaggerJSDoc","swaggerUi","Documentation","app","swaggerSpec","use","serve","setup","asyncHandler","controller","req","res","next","Promise","resolve","err","error","toString","sendStatus","send","socketHandler","msg","express","cors","Middlewares","urlencoded","extended","json","header","method","end","getHeader","headers","status","id","userId","UsersController","Model","restrictedAccess","router","Router","get","getById","post","body","mail","username","create","params","remove","put","update","Schema","where","destroy","getByEmailAndPassword","findOne","findAll","require","DataTypes","define","STRING","socketIO","MessagesController","config","origin","server","io","on","socket","http","Controllers","ConnectDatabase","SocketsControllers","port","PORT","createServer","listen"],"sourceRoot":""}