{"version":3,"sources":["webpack://server/./src/config/database.js","webpack://server/./src/config/swagger.js","webpack://server/./src/controllers/api/auth/index.js","webpack://server/./src/controllers/api/index.js","webpack://server/./src/controllers/api/users/index.js","webpack://server/./src/database/index.js","webpack://server/./src/documentation/index.js","webpack://server/./src/index.js","webpack://server/./src/middlewares/error-handler.js","webpack://server/./src/middlewares/index.js","webpack://server/./src/middlewares/restricted-access.js","webpack://server/./src/models/users/index.js","webpack://server/./src/models/users/schema.js","webpack://server/./src/utils/access.js","webpack://server/external \"@babel/runtime/helpers/asyncToGenerator\"","webpack://server/external \"@babel/runtime/regenerator\"","webpack://server/external \"body-parser\"","webpack://server/external \"cors\"","webpack://server/external \"express\"","webpack://server/external \"http\"","webpack://server/external \"jsonwebtoken\"","webpack://server/external \"sequelize\"","webpack://server/external \"swagger-jsdoc\"","webpack://server/external \"swagger-ui-express\"","webpack://server/webpack/bootstrap","webpack://server/webpack/runtime/compat get default export","webpack://server/webpack/runtime/define property getters","webpack://server/webpack/runtime/hasOwnProperty shorthand","webpack://server/webpack/runtime/make namespace object","webpack://server/webpack/startup"],"names":["host","user","password","database","connectionLimit","swaggerConfig","definition","openapi","info","title","version","components","securitySchemes","ApiKeyAuth","type","name","security","securityDefinitions","basicAuth","apis","router","express","post","asyncHandler","req","res","mail","body","pass","send","UsersModel","sendStatus","token","createToken","id","app","use","AuthController","UsersController","get","restrictedAccess","userId","params","patch","dbConfig","db","Sequelize","dialect","query","raw","onConnect","authenticate","sync","console","log","Documentation","swaggerSpec","swaggerJSDoc","swaggerUi","port","process","Middlewares","ApiControllers","ConnectDatabase","server","http","listen","controller","next","Promise","resolve","err","error","toString","socketHandler","msg","bodyParser","cors","header","method","end","getHeader","headers","status","verifyToken","createUser","UserSchema","updateUser","data","where","deleteUser","getUserByEmailAndPassword","require","DataTypes","User","STRING","secret","decodeToken","jwt","callback"],"mappings":";;;;;;;;;;;;;;AAAA,iEAAe;AACXA,MAAI,EAAE,WADK;AAEXC,MAAI,EAAE,MAFK;AAGXC,UAAQ,EAAE,EAHC;AAIXC,UAAQ,EAAE,MAJC;AAKXC,iBAAe,EAAG;AALP,CAAf,E;;;;;;;;;;;;;;ACAO,IAAMC,aAAa,GAAG;AAC3BC,YAAU,EAAE;AACVC,WAAO,EAAE,OADC;AAEVC,QAAI,EAAE;AACJC,WAAK,EAAE,UADH;AAEJC,aAAO,EAAE;AAFL,KAFI;AAMVC,cAAU,EAAE;AACVC,qBAAe,EAAE;AACfC,kBAAU,EAAE;AACVC,cAAI,EAAE,QADI;AAEVC,cAAI,EAAE,gBAFI;AAGV,gBAAI;AAHM;AADG;AADP,KANF;AAeVC,YAAQ,EAAE,CACR;AAAEH,gBAAU,EAAE;AAAd,KADQ,CAfA;AAkBVI,uBAAmB,EAAE;AACjBC,eAAS,EAAE;AACPJ,YAAI,EAAE;AADC;AADM;AAlBX,GADe;AAyB3B;AACAK,MAAI,EAAE,CAAC,2BAAD,EAA8B,4BAA9B;AA1BqB,CAAtB,C;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AACA;AACA;AAEA,IAAMC,MAAM,GAAGC,qDAAA,EAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,QAAZ,EAAsBC,uEAAY;AAAA,iLAAC,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBC,gBADyB,GAClBF,GAAG,CAACG,IAAJ,CAASD,IADS;AAEzBE,gBAFyB,GAElBJ,GAAG,CAACG,IAAJ,CAASC,IAFS;;AAAA,kBAI3B,CAACF,IAAD,IAAS,CAACE,IAJiB;AAAA;AAAA;AAAA;;AAAA,6CAIJH,GAAG,CAACI,IAAJ,CAAS,GAAT,CAJI;;AAAA;AAAA;AAAA,mBAKZC,oEAAA,CAAqCJ,IAArC,EAA2CE,IAA3C,CALY;;AAAA;AAKzB3B,gBALyB;;AAAA,gBAO3BA,IAP2B;AAAA;AAAA;AAAA;;AAAA,6CAQtBwB,GAAG,CAACM,UAAJ,CAAe,GAAf,CARsB;;AAAA;AAWzBC,iBAXyB,GAWjBC,0DAAW,CAAC;AAAEC,gBAAE,EAAEjC,IAAI,CAACiC;AAAX,aAAD,CAXM;AAa/BT,eAAG,CAACI,IAAJ,CAASG,KAAT;;AAb+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA;AAAA;AAAA;AAAA,IAAlC;AAkBA,iEAAeZ,MAAf,E;;;;;;;;;;;;;;;;ACzBA;AACA;AAEA,6BAAe,oCAAUe,GAAV,EAAe;AAC5B;AACAA,KAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBC,0CAAjB,EAF4B,CAI5B;;AACAF,KAAG,CAACC,GAAJ,CAAQ,QAAR,EAAkBE,2CAAlB;AAEAH,KAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,UAACZ,GAAD,EAAMC,GAAN;AAAA,WAAcA,GAAG,CAACI,IAAJ,+CAAd;AAAA,GAAb;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;ACXD;AACA;AACA;AACA;AAEA,IAAMT,MAAM,GAAGC,qDAAA,EAAf;AAEAD,MAAM,CAACmB,GAAP,CAAW,kBAAX,EAA+BC,kEAA/B,EAAiDjB,uEAAY;AAAA,iLAAC,iBAAMC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAC5DA,eAAG,CAACI,IAAJ,oBAAqBL,GAAG,CAACiB,MAAzB;;AAD4D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA;AAAA;AAAA;AAAA,IAA7D;AAIArB,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuBC,uEAAY;AAAA,kLAAC,kBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAC5BC,gBAD4B,GACrBF,GAAG,CAACG,IAAJ,CAASD,IADY;AAE5BE,gBAF4B,GAErBJ,GAAG,CAACG,IAAJ,CAASC,IAFY;AAAA;AAAA,mBAG5BE,qDAAA,CAAsBJ,IAAtB,EAA4BE,IAA5B,CAH4B;;AAAA;AAIlCH,eAAG,CAACI,IAAJ,CAAS,0BAAT;;AAJkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA;AAAA;AAAA;AAAA,IAAnC;AAOAT,MAAM,UAAN,CAAc,MAAd,EAAsBoB,kEAAtB,EAAuCjB,uEAAY;AAAA,kLAAE,kBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACjCS,cADiC,GACxBV,GADwB,CAC3CkB,MAD2C,CACjCR,EADiC;AAAA;AAAA,mBAE7CJ,qDAAA,CAAsBI,EAAtB,CAF6C;;AAAA;AAGnDT,eAAG,CAACI,IAAJ,oBAAqBK,EAArB;;AAHmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAF;;AAAA;AAAA;AAAA;AAAA,IAAnD;AAMAd,MAAM,CAACuB,KAAP,CAAa,MAAb,EAAqBH,kEAArB;AAAA,kLAAuC,kBAAOhB,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBS,cADmB,GACJV,GADI,CAC7BkB,MAD6B,CACnBR,EADmB,EACbP,IADa,GACJH,GADI,CACbG,IADa;AAAA;AAAA,mBAE/BG,qDAAA,CAAsBI,EAAtB,EAA0BP,IAA1B,CAF+B;;AAAA;AAGrCF,eAAG,CAACI,IAAJ,oBAAqBK,EAArB;;AAHqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvC;;AAAA;AAAA;AAAA;AAAA;AAOA,iEAAed,MAAf,E;;;;;;;;;;;;;;;;;;;;;;;;AC/BA;AACA;IAEQjB,Q,GAAmCyC,8D;IAAzB3C,I,GAAyB2C,0D;IAAnB1C,Q,GAAmB0C,8D;IAAT5C,I,GAAS4C,0D;AAEpC,IAAMC,EAAE,GAAG,IAAIC,gDAAJ,CAAc3C,QAAd,EAAwBF,IAAxB,EAA8BC,QAA9B,EAAwC;AACtDF,MAAI,EAAJA,IADsD;AAEzD+C,SAAO,EAAE,OAFgD;AAGzDC,OAAK,EAAE;AAAEC,OAAG,EAAE;AAAP;AAHkD,CAAxC,CAAX;AAMP;AAAA,iLAAe,iBAAOC,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEDL,EAAE,CAACM,YAAH,EAFC;;AAAA;AAGPN,cAAE,CAACO,IAAH;AACAF,qBAAS;AACfG,mBAAO,CAACC,GAAR,CAAY,yBAAZ;AALa;AAAA;;AAAA;AAAA;AAAA;AAObD,mBAAO,CAACC,GAAR,CAAY,oCAAZ;;AAPa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAf;;AAAA;AAAA;AAAA;AAAA,M;;;;;;;;;;;;;;;;;;;ACXA;AACA;AACA;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACpB,GAAD,EAAS;AAC7B;AACA,MAAMqB,WAAW,GAAGC,oDAAY,CAACpD,0DAAD,CAAhC,CAF6B,CAI7B;;AACA8B,KAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBsB,iEAAjB,EAAkCA,+DAAA,CAAgBF,WAAhB,CAAlC;AACD,CAND;;AAQA,iEAAeD,aAAf,E;;;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMpB,GAAG,GAAGd,8CAAO,EAAnB;AACA;AACA;AACA;AACA;;AACA,IAAMsC,IAAI,GAAGC,IAAb;AAEAL,uDAAa,CAACpB,GAAD,CAAb;AACA0B,qDAAW,CAAC1B,GAAD,CAAX;AACA2B,yDAAc,CAAC3B,GAAD,CAAd;AACA4B,kDAAe,CAAC,YAAM;AAClB,MAAMC,MAAM,GAAGC,wDAAA,CAAkB9B,GAAlB,CAAf;AACA6B,QAAM,CAACE,MAAP,CAAcP,IAAd,EAAoB;AAAA,WAAMN,OAAO,CAACC,GAAR,gDAAoDK,IAApD,EAAN;AAAA,GAApB;AACH,CAHc,CAAf,C;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AAEO,IAAMpC,YAAY,GAAG,SAAfA,YAAe,CAAA4C,UAAU;AAAA,SAAI,UAAC3C,GAAD,EAAMC,GAAN,EAAW2C,IAAX;AAAA,WAAoBC,OAAO,CAClEC,OAD2D,CACnDH,UAAU,CAAC3C,GAAD,EAAMC,GAAN,EAAW2C,IAAX,CADyC,WAErD,UAACG,GAAD,EAAS;AACdlB,aAAO,CAACmB,KAAR,CAAc,mBAAmBD,GAAG,CAACE,QAAJ,EAAjC;AACA,UAAIF,GAAJ,EAAS,OAAO9C,GAAG,CAACM,UAAJ,CAAe,GAAf,EAAoBF,IAApB,EAAP;AACZ,KAL6D,CAApB;AAAA,GAAJ;AAAA,CAA/B;AAOA,IAAM6C,aAAa,GAAG,SAAhBA,aAAgB,CAAAP,UAAU;AAAA,SAAI,UAAAQ,GAAG;AAAA,WAAIN,OAAO,CACtDC,OAD+C,CACvCH,UAAU,CAACQ,GAAD,CAD6B,WAEzC,UAACJ,GAAD,EAAS;AACdlB,aAAO,CAACmB,KAAR,CAAc,kBAAkBD,GAAhC;AACH,KAJiD,CAAJ;AAAA,GAAP;AAAA,CAAhC,C;;;;;;;;;;;;;;;;;;ACZP;AACA;;AAEA,IAAMV,WAAW,GAAG,SAAdA,WAAc,CAAC1B,GAAD,EAAS;AACzBA,KAAG,CAACC,GAAJ,CAAQwC,6DAAA,EAAR;AACAzC,KAAG,CAACC,GAAJ,CAAQwC,uDAAA,EAAR;AACAzC,KAAG,CAACC,GAAJ,CAAQyC,2CAAI,EAAZ,EAHyB,CAGT;;AAChB1C,KAAG,CAACC,GAAJ,CAAQ,UAAUZ,GAAV,EAAeC,GAAf,EAAoB2C,IAApB,EAA0B;AAC9B3C,OAAG,CAACqD,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACArD,OAAG,CAACqD,MAAJ,CAAW,8BAAX,EAA2C,gDAA3C;AACArD,OAAG,CAACqD,MAAJ,CAAW,kCAAX,EAA+C,IAA/C;AACArD,OAAG,CAACqD,MAAJ,CAAW,8BAAX,EAA2C,6BAA3C;;AAEA,QAAItD,GAAG,CAACuD,MAAJ,KAAe,SAAnB,EAA8B;AAC1BtD,SAAG,CAACuD,GAAJ;AACH,KAFD,MAEO;AACHZ,UAAI;AACP;AACJ,GAXD;AAYH,CAhBD;;AAkBA,iEAAeP,WAAf,E;;;;;;;;;;;;;;;;ACrBA;AACO,IAAMoB,SAAS,GAAG,SAAZA,SAAY,CAACzD,GAAD,EAAMsD,MAAN;AAAA,SAAiBtD,GAAG,CAAC0D,OAAJ,CAAYJ,MAAZ,CAAjB;AAAA,CAAlB;AAEP,iEAAe,UAACtD,GAAD,EAAMC,GAAN,EAAW2C,IAAX,EAAoB;AACjC,MAAMpC,KAAK,GAAGiD,SAAS,CAACzD,GAAD,EAAM,gBAAN,CAAvB;;AAEA,MAAI,CAACQ,KAAL,EAAY;AACV,WAAOP,GAAG,CAAC0D,MAAJ,CAAW,GAAX,EAAgBtD,IAAhB,CAAqB,oBAArB,CAAP;AACD;;AACD,SAAOuD,0DAAW,CAACpD,KAAD,EAAQ,UAACuC,GAAD,EAAsB;AAAA,mFAAP,EAAO;AAAA,QAAdrC,EAAc,QAAdA,EAAc;;AAC9C,QAAIqC,GAAJ,EAAS;AACP,aAAO9C,GAAG,CAAC0D,MAAJ,CAAW,GAAX,EAAgBtD,IAAhB,CAAqB,+BAArB,CAAP;AACD;;AAED,QAAI,CAACK,EAAL,EAAS;AACP,aAAOT,GAAG,CAAC0D,MAAJ,CAAW,GAAX,EAAgBtD,IAAhB,CAAqB,mBAArB,CAAP;AACD;;AACDL,OAAG,CAACiB,MAAJ,GAAaP,EAAb;AACA,WAAOkC,IAAI,EAAX;AACD,GAViB,CAAlB;AAWD,CAjBD,E;;;;;;;;;;;;;;;;;;ACHA;AAEO,IAAMiB,UAAU,GAAG,SAAbA,UAAa,CAAC3D,IAAD,EAAOxB,QAAP;AAAA,SAAoBoF,mDAAA,CAAkB;AAC5D5D,QAAI,EAAJA,IAD4D;AAE5DxB,YAAQ,EAARA;AAF4D,GAAlB,CAApB;AAAA,CAAnB;AAKA,IAAMqF,UAAU,GAAG,SAAbA,UAAa,CAACrD,EAAD,EAAKsD,IAAL;AAAA,SAAcF,mDAAA,CAAkBE,IAAlB,EAAwB;AAAEC,SAAK,EAAE;AAAEvD,QAAE,EAAFA;AAAF;AAAT,GAAxB,CAAd;AAAA,CAAnB;AAEA,IAAMwD,UAAU,GAAG,SAAbA,UAAa,CAAAxD,EAAE;AAAA,SAAIoD,oDAAA,CAAmB;AAAEG,SAAK,EAAE;AAAEvD,QAAE,EAAFA;AAAF;AAAT,GAAnB,CAAJ;AAAA,CAArB;AAEA,IAAMyD,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACjE,IAAD,EAAOxB,QAAP;AAAA,SAAoBoF,oDAAA,CAAmB;AAC5EG,SAAK,EAAE;AACH/D,UAAI,EAAJA,IADG;AAEHxB,cAAQ,EAARA;AAFG;AADqE,GAAnB,CAApB;AAAA,CAAlC,C;;;;;;;;;;;;;;;ACXP;;eACsB0F,mBAAO,CAAC,4BAAD,C;IAArBC,S,YAAAA,S;;AAER,IAAMC,IAAI,GAAGjD,gDAAA,CAAU,MAAV,EAAkB;AAC9B3C,UAAQ,EAAE2F,SAAS,CAACE,MADU;AAE9BrE,MAAI,EAAEmE,SAAS,CAACE;AAFc,CAAlB,CAAb;AAKA,iEAAeD,IAAf,E;;;;;;;;;;;;;;;;;;ACRA;AAEA,IAAME,MAAM,GAAG,QAAf;AAEO,IAAMC,WAAW,GAAGC,4DAApB;AAEA,IAAMjE,WAAW,GAAG,SAAdA,WAAc,CAAAuD,IAAI;AAAA,SAAIU,wDAAA,CAASV,IAAT,EAAeQ,MAAf,CAAJ;AAAA,CAAxB;AAEA,IAAMZ,WAAW,GAAG,SAAdA,WAAc,CAACpD,KAAD,EAAQmE,QAAR;AAAA,SAAqBD,0DAAA,CAAWlE,KAAX,EAAkBgE,MAAlB,EAA0BG,QAA1B,CAArB;AAAA,CAApB,C;;;;;;;;;;ACRP,qE;;;;;;;;;;ACAA,wD;;;;;;;;;;ACAA,yC;;;;;;;;;;ACAA,kC;;;;;;;;;;ACAA,qC;;;;;;;;;;ACAA,kC;;;;;;;;;;ACAA,0C;;;;;;;;;;ACAA,uC;;;;;;;;;;ACAA,2C;;;;;;;;;;ACAA,gD;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"bundle.js","sourcesContent":["export default {\n    host: 'localhost',\n    user: 'root',\n    password: '',\n    database: 'amor',\n    connectionLimit : 10,\n};","export const swaggerConfig = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Test API',\n      version: '1.0.0',\n    },\n    components: {\n      securitySchemes: {\n        ApiKeyAuth: {\n          type: 'apiKey',\n          name: 'x-access-token',\n          in: 'header',\n        },\n      },\n    },\n    security: [\n      { ApiKeyAuth: [] },\n    ],\n    securityDefinitions: {\n        basicAuth: {\n            type: 'basic'\n        },\n    },\n  },\n  // Path to the API docs\n  apis: ['./src/controllers/**/*.js', './src/controllers/**/*.yml'],\n};\n\n","import express from 'express';\nimport * as UsersModel from \"@Models/users\";\nimport { createToken } from \"@Utils/access\";\nimport { asyncHandler } from \"@Middlwares/error-handler\";\n\nconst router = express.Router();\n\nrouter.post(\"/login\", asyncHandler(async (req, res) => {\n    const mail = req.body.mail;\n    const pass = req.body.pass;\n\n    if (!mail || !pass) return res.send(400);\n    const user = await UsersModel.getUserByEmailAndPassword(mail, pass);\n\n    if(!user) {\n      return res.sendStatus(403);\n    }\n\n    const token = createToken({ id: user.id });\n\n    res.send(token);\n  })\n);\n\n\nexport default router;\n","import UsersController from './users';\nimport AuthController from './auth';\n\nexport default function (app) {\n  // Public\n  app.use('/auth', AuthController);\n\n  // Private\n  app.use('/users', UsersController);\n\n  app.use('/', (req, res) => res.send(`Working like a charm ٩(^‿^)۶`));\n}\n","import express from 'express';\nimport * as UsersModel from \"@Models/users\";\nimport { asyncHandler } from \"@Middlwares/error-handler\";\nimport restrictedAccess from \"@Middlwares/restricted-access\";\n\nconst router = express.Router();\n\nrouter.get(\"/restricted-path\", restrictedAccess, asyncHandler(async(req, res) => {\n  res.send(`User id: ${req.userId}`);\n}));\n\nrouter.post(\"/create\", asyncHandler(async (req, res) => {\n  const mail = req.body.mail;\n  const pass = req.body.pass;\n  await UsersModel.createUser(mail, pass)\n  res.send('Usuario creado con éxito');\n}));\n\nrouter.delete(\"/:id\", restrictedAccess,asyncHandler( async (req, res) => {\n  const { params: { id } } = req;\n  await UsersModel.deleteUser(id);\n  res.send(`User id: ${id} deleted`);\n}));\n\nrouter.patch(\"/:id\", restrictedAccess, async (req, res) => {\n  const { params: { id }, body } = req;\n  await UsersModel.updateUser(id, body);\n  res.send(`User id: ${id} updated`);\n});\n\n\nexport default router;\n","import { Sequelize } from 'sequelize';\r\nimport dbConfig from '../config/database';\r\n\r\nconst { database, user, password, host } = dbConfig;\r\n\r\nexport const db = new Sequelize(database, user, password, {\r\n    host,\r\n\tdialect: 'mysql',\r\n\tquery: { raw: true }\r\n});\r\n\r\nexport default async (onConnect) => {\r\n\ttry {\r\n        await db.authenticate();\r\n        db.sync();\r\n        onConnect();\r\n\t\tconsole.log('Database connection OK!');\r\n\t} catch (error) {\r\n\t\tconsole.log('Unable to connect to the database:');\r\n\t}\r\n}","import swaggerJSDoc from \"swagger-jsdoc\";\nimport swaggerUi from \"swagger-ui-express\";\nimport { swaggerConfig, options } from \"../config/swagger\";\n\nconst Documentation = (app) => {\n  // JSON of specs\n  const swaggerSpec = swaggerJSDoc(swaggerConfig);\n\n  // Api entrypoint\n  app.use(\"/docs\", swaggerUi.serve, swaggerUi.setup(swaggerSpec));\n};\n\nexport default Documentation;\n","import express from 'express';\nimport http from 'http';\nimport Middlewares from './middlewares';\nimport ApiControllers from './controllers/api';\nimport Documentation from './documentation';\nimport ConnectDatabase from './database';\n\nconst app = express();\n/*\nHeroku utiliza la variable de entorno process.env.port para asignar el puerto donde se va ejecutar el servidor,\npor eso la hemos definido en esta plantilla\n*/\nconst port = process.env.PORT;\n\nDocumentation(app);\nMiddlewares(app);\nApiControllers(app);\nConnectDatabase(() => {\n    const server = http.createServer(app);\n    server.listen(port, () => console.log(`Server listening to http://localhost:${port}`));\n});\n\n","/*Tenemos una función que recibe como parámetro la función de cada controlador,\nla ejecuta (resolve)\ny si  hay algún error, lo mostrará por consola y lanzará un 500\n*/\n\nexport const asyncHandler = controller => (req, res, next) => Promise\n  .resolve(controller(req, res, next))\n  .catch((err) => {\n    console.error('Request error:' + err.toString());\n    if (err) return res.sendStatus(500).send();\n});\n \nexport const socketHandler = controller => msg => Promise\n  .resolve(controller(msg))\n  .catch((err) => {\n    console.error('Socket error:' + err);\n});","import cors from 'cors';\nimport bodyParser from 'body-parser';\n\nconst Middlewares = (app) => {\n    app.use(bodyParser.urlencoded());\n    app.use(bodyParser.json());\n    app.use(cors()) // Use this after the variable declaration\n    app.use(function (req, res, next) {\n        res.header('Access-Control-Allow-Origin', '*');\n        res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n        res.header('Access-Control-Allow-Credentials', true);\n        res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');\n    \n        if (req.method === 'OPTIONS') {\n            res.end();\n        } else {\n            next();\n        }\n    });\n};\n\nexport default Middlewares;","import { verifyToken } from '../utils/access';\nexport const getHeader = (req, header) => req.headers[header];\n\nexport default (req, res, next) => {\n  const token = getHeader(req, 'x-access-token');\n  \n  if (!token) {\n    return res.status(400).send('No token provided.');\n  }\n  return verifyToken(token, (err, { id } = {}) => {\n    if (err) {\n      return res.status(401).send('Failed to authenticate token.');\n    }\n\n    if (!id) {\n      return res.status(403).send('Wrong credentials');\n    }\n    req.userId = id;\n    return next();\n  });\n}","import UserSchema from './schema';\n\nexport const createUser = (mail, password) => UserSchema.create({\n    mail,\n    password,\n});\n\nexport const updateUser = (id, data) => UserSchema.update(data, { where: { id }});\n\nexport const deleteUser = id => UserSchema.destroy({ where: { id }});\n\nexport const getUserByEmailAndPassword = (mail, password) => UserSchema.findOne({\n    where: {\n        mail,\n        password\n    }\n});\n","import { db } from '../../database';\r\nconst { DataTypes } = require('sequelize');\r\n\r\nconst User = db.define('user', {\r\n\tpassword: DataTypes.STRING,\r\n\tmail: DataTypes.STRING,\r\n});\r\n\r\nexport default User;","import jwt from 'jsonwebtoken';\n\nconst secret = 'secret';\n\nexport const decodeToken = jwt.decode;\n\nexport const createToken = data => jwt.sign(data, secret);\n\nexport const verifyToken = (token, callback) => jwt.verify(token, secret, callback);","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");;","module.exports = require(\"@babel/runtime/regenerator\");;","module.exports = require(\"body-parser\");;","module.exports = require(\"cors\");;","module.exports = require(\"express\");;","module.exports = require(\"http\");;","module.exports = require(\"jsonwebtoken\");;","module.exports = require(\"sequelize\");;","module.exports = require(\"swagger-jsdoc\");;","module.exports = require(\"swagger-ui-express\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}